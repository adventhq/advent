<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Black Hole Landing Page Animation</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- GSAP CDN for advanced animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
      }
      canvas {
        display: block;
      }
      .overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <div class="overlay text-white">
      <h1 class="text-5xl font-bold mb-4">Enter the Void</h1>
      <p class="text-xl mb-6">Witness the power of gravitational innovation.</p>
      <button
        id="explore-btn"
        class="px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 transition"
      >
        Explore Now
      </button>
    </div>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      let width, height;
      let centerX, centerY;
      const blackHoleRadius = 50;

      // Declare stars array first
      let stars = [];

      function generateStars() {
        stars = [];
        for (let i = 0; i < 500; i++) {
          stars.push({
            x: Math.random() * width,
            y: Math.random() * height,
            size: Math.random() * 1 + 0.5,
            alpha: Math.random() * 0.5 + 0.5,
          });
        }
      }

      function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
        centerX = width / 2;
        centerY = height / 2;
        generateStars();
        particles.forEach((p) => p.reset());
      }

      // Particle class for planets
      class Particle {
        constructor(image) {
          this.image = image;
          this.reset();
        }

        reset() {
          this.x = Math.random() * width;
          this.y = Math.random() * height;
          this.size = Math.random() * 40 + 20;
          this.alpha = 1;
          this.rotation = Math.random() * Math.PI * 2;
          this.spinSpeed = (Math.random() - 0.5) * 0.1;
          this.angle = Math.random() * Math.PI * 2;
          this.distance = Math.sqrt(
            (this.x - centerX) ** 2 + (this.y - centerY) ** 2
          );
          this.speed = Math.random() * 0.005 + 0.01;
          this.angularSpeed = Math.random() * 0.02 + 0.01;
          this.trail = [];
          this.trailLength = 20;
        }

        update() {
          // Gravitational pull: reduce distance over time
          this.distance *= 1 - this.speed * (blackHoleRadius / this.distance);

          // Spiral motion
          this.angle += this.angularSpeed * (blackHoleRadius / this.distance);

          // Planet spin
          this.rotation += this.spinSpeed;

          // Update position based on polar coordinates
          this.x = centerX + Math.cos(this.angle) * this.distance;
          this.y = centerY + Math.sin(this.angle) * this.distance;

          // Distortion near black hole: scale down and fade
          if (this.distance < blackHoleRadius * 3) {
            this.size *= 0.98;
            this.alpha *= 0.99;
          }

          // Add to trail
          this.trail.push({
            x: this.x,
            y: this.y,
            rotation: this.rotation,
            size: this.size,
            alpha: this.alpha,
          });
          if (this.trail.length > this.trailLength) {
            this.trail.shift();
          }

          // Reset if swallowed
          if (
            this.distance < blackHoleRadius ||
            this.size < 5 ||
            this.alpha < 0.1
          ) {
            this.reset();
          }
        }

        draw() {
          // Draw trail
          this.trail.forEach((point, i) => {
            ctx.save();
            ctx.globalAlpha = (i / this.trailLength) * point.alpha;
            ctx.translate(point.x, point.y);
            ctx.rotate(point.rotation);
            const trailSize = point.size * ((i / this.trailLength) * 0.5 + 0.5);
            ctx.drawImage(
              this.image,
              -trailSize / 2,
              -trailSize / 2,
              trailSize,
              trailSize
            );
            ctx.restore();
          });

          // Draw main planet
          ctx.save();
          ctx.globalAlpha = this.alpha;
          ctx.translate(this.x, this.y);
          ctx.rotate(this.rotation);
          ctx.drawImage(
            this.image,
            -this.size / 2,
            -this.size / 2,
            this.size,
            this.size
          );
          ctx.restore();
        }
      }

      const particles = [];
      const planetUrls = [
        //"https://img.freepik.com/free-psd/stunning-3d-render-ringed-planet-celestial-body-cosmic-wonder_191095-79308.jpg",
        //"https://i.pinimg.com/736x/07/cb/13/07cb137eb8e9dc533a9ecade295ad606.jpg",
        //"https://images.rawpixel.com/image_png_800/cHJpdmF0ZS9sci9pbWFnZXMvd2Vic2l0ZS8yMDIyLTA1L2pvYjcyMy0yMjUtcC5wbmc.png",
        //"https://png.pngtree.com/png-vector/20240718/ourlarge/pngtree-venus-planet-on-transparent-background-png-image_13144097.png",
        //"https://upload.wikimedia.org/wikipedia/commons/2/22/Earth_Western_Hemisphere_transparent_background.png",
        "landingass/aws1.png",
        "landingass/aws2.png",
        "landingass/oracle1.png",
        "landingass/gcp1.png",
      ];

      // Load images independently and create particles on success
      planetUrls.forEach((url) => {
        let img = new Image();
        img.crossOrigin = "anonymous"; // Attempt to enable CORS
        img.src = url;
        img.onload = () => {
          // Create up to 2 particles per image to reach up to 10
          for (let i = 0; i < 2; i++) {
            if (particles.length < 10) {
              particles.push(new Particle(img));
            }
          }
        };
        img.onerror = () => {
          console.error(`Failed to load image: ${url}`);
        };
      });

      // Accretion disk simulation
      function drawBlackHole() {
        // Event horizon
        const gradient = ctx.createRadialGradient(
          centerX,
          centerY,
          0,
          centerX,
          centerY,
          blackHoleRadius * 2
        );
        gradient.addColorStop(0, "black");
        gradient.addColorStop(0.5, "rgba(0,0,0,0.8)");
        gradient.addColorStop(1, "rgba(255,165,0,0.2)"); // Orange glow for accretion

        ctx.beginPath();
        ctx.arc(centerX, centerY, blackHoleRadius * 2, 0, Math.PI * 2);
        ctx.fillStyle = gradient;
        ctx.fill();

        // Pulsing glow
        const pulse = Math.sin(Date.now() / 2000) * 0.1 + 1;
        const glowRadius = blackHoleRadius * 2 * pulse;
        const glowGradient = ctx.createRadialGradient(
          centerX,
          centerY,
          blackHoleRadius,
          centerX,
          centerY,
          glowRadius
        );
        glowGradient.addColorStop(0, "rgba(255,165,0,0.3)");
        glowGradient.addColorStop(1, "rgba(255,165,0,0)");
        ctx.beginPath();
        ctx.arc(centerX, centerY, glowRadius, 0, Math.PI * 2);
        ctx.fillStyle = glowGradient;
        ctx.fill();
      }

      function animate() {
        ctx.clearRect(0, 0, width, height);

        // Draw starry background
        stars.forEach((s) => {
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
          ctx.fill();
        });

        drawBlackHole();

        particles.forEach((p) => {
          p.update();
          p.draw();
        });

        requestAnimationFrame(animate);
      }

      // Initialize everything
      resize();
      window.addEventListener("resize", resize);

      // Start animation immediately (black hole and stars will show even if planets load slowly)
      animate();

      // Use GSAP for overlay animation
      gsap.from(".overlay", { opacity: 0, y: 50, duration: 2, delay: 1 });

      // Add button functionality: reset all particles on click
      const exploreBtn = document.getElementById("explore-btn");
      exploreBtn.addEventListener("click", () => {
        particles.forEach((p) => p.reset());
        // Optional: Add a visual effect or alert
        // alert('Diving deeper into the void!');
      });
    </script>
  </body>
</html>
